<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Doper le cerveau à l’électricité : vers une humanité augmentée ou altérée ?">
<meta name="dcterms.date" content="2016-02-14">
<meta name="description" content="Le dopage cognitif prend la forme de produits high-tech avec l’arrivée des premiers neurostimulateurs électriques sur le marché. Démystifications et mises en garde sont de rigueur.">

<title>index – blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(galvani.jpg);
background-size: cover;
      }
</style>
<style>
.quarto-title-block .quarto-title-banner {
  background-position-y: center;
  height: 400px;
}
</style>


<link rel="stylesheet" href="../../../custom.scss">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      
                  <div>
        <div class="description">
          Le dopage cognitif prend la forme de produits high-tech avec l’arrivée des premiers neurostimulateurs électriques sur le marché. Démystifications et mises en garde sont de rigueur.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">neuro89</div>
                <div class="quarto-category">neuroscience</div>
                <div class="quarto-category">sciences cognitives</div>
                <div class="quarto-category">neuromodulation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Doper le cerveau à l’électricité : vers une humanité augmentée ou altérée ? </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 14, 2016</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Dans le monde anglo-saxon, le culte de la&nbsp;productivité et de la performance individuelle se traduit par un recours de plus en plus fréquent au <a href="http://www.cerveauetpsycho.fr/ewb_pages/a/article-l-amelioration-cognitive-une-illusion-26966.php">dopage cognitif</a>&nbsp;(«&nbsp;cognitive enhancement&nbsp;»). L’ingestion de médicaments psychostimulants comme la Ritaline ou le Modafinil par des individus en bonne santé y est ainsi devenue monnaie courante.</p>
<p>A l’exception d’une faible proportion de médecins et étudiants en médecine, l’utilisation de ces substances reste au contraire très marginale en France, <a href="http://gradworks.umi.com/34/10/3410842.html">même dans le domaine thérapeutique</a>.</p>
<p>Bien que cette divergence s’enracine peut-être dans une conception différente de l’esprit humain d’une culture à l’autre, le dopage cognitif pourrait prochainement entrer dans nos vies par une autre voie : la neurostimulation électrique.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="galvani.jpg" class="img-fluid figure-img" width="477"></p>
<figcaption>Représentation d’une expérience de Luigi Galvani (1737-1798), qui a donné son nom au verbe «&nbsp;galvaniser&nbsp;»</figcaption>
</figure>
</div>
<p>D’un point de vue scientifique, l’idée n’est pas neuve&nbsp;:</p>
<ul>
<li><p>dès l’antiquité, Scribonius Largus et Gallien discutaient de l’efficacité des chocs produits par <a href="https://fr.wikipedia.org/wiki/Torpedo">la raie électrique</a> dans le traitement des crises de gouttes, des maux de tête ou de l’épilepsie [<a href="https://journals.viamedica.pl/international_maritime_health/article/download/IMH.2014.0015/27194">PDF</a>]&nbsp;;</p></li>
<li><p>l’électricité animale elle-même a été découverte au XVIIIe siècle à travers les travaux de <a href="https://fr.wikipedia.org/wiki/Luigi_Galvani">Galvani</a> sur les cuisses de grenouille, familiers&nbsp;à tous les collégiens de France et de Navarre&nbsp;;</p></li>
<li><p>à peine un siècle plus tard, les premiers <a href="https://fr.wikipedia.org/wiki/%C3%89lectroenc%C3%A9phalographie">électro-encéphalogrammes</a> étaient enregistrés par Richard Caton avant d’être perfectionnés par Hans Berger, le découvreur des différentes ondes électriques produites par le cerveau&nbsp;</p></li>
<li><p>enfin, plusieurs techniques médicales de neurostimulation sont connues et appliquées depuis le milieu du XXe siècle, notamment pour le traitement des douleurs chroniques (stimulation de la moelle épinière) ou de la dépression (électrochocs ou <a href="https://fr.wikipedia.org/wiki/%C3%89lectroconvulsivoth%C3%A9rapie">sismothérapie</a>).</p></li>
</ul>
<section id="efficacité-réelle-ou-mirage-marketing" class="level2">
<h2 class="anchored" data-anchor-id="efficacité-réelle-ou-mirage-marketing">Efficacité réelle ou mirage marketing&nbsp;?</h2>
<p>Cependant, avec la société britannique <a href="http://eu.foc.us/v2/">Foc.us</a> et quelques autres, la neurostimulation vient de franchir un seuil crucial&nbsp;: celui de l’hôpital et, partant, celui du principe de précaution. Son appareil de <a href="https://fr.wikipedia.org/wiki/Stimulation_transcr%C3%A2nienne_%C3%A0_courant_direct">«&nbsp;stimulation transcrânienne à courant direct&nbsp;»</a> («&nbsp;tDCS&nbsp;» en anglais) est en effet d’ores et déjà accessible au quidam moyen sur Internet.</p>
<p>Cette technique se distingue de la sismothérapie, par son caractère continu et surtout par une intensité de stimulation environ 50&nbsp;fois plus faible. C’est d’ailleurs pour cela qu’elle est utilisée depuis environ deux décennies par les chercheurs en neurosciences cognitives : parce que leurs expériences portent principalement sur des étudiants plein d’avenir (du moins, on leur souhaite), il serait hors de question d’altérer leur fonctionnement cérébral en profondeur&nbsp;!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="15711138.jpg" class="img-fluid figure-img" width="505"></p>
<figcaption>Une égérie de la marque Foc.us, dominatrice et déterminée grâce à son électrode de stimulation sur le cortex préfrontal droit… - Foc.us</figcaption>
</figure>
</div>
<p>Promettant monts et merveilles à ses clients potentiels, la société Foc.us capitalise ainsi sur une importante manne d’articles académiques ayant suggéré que la stimulation cortex préfrontal permettrait&nbsp;:</p>
<ul>
<li><p>de <a href="http://www.ncbi.nlm.nih.gov/pubmed/23933040">faciliter l’apprentissage de nouveaux exercices</a> moteurs ou intellectuels&nbsp;;</p></li>
<li><p><a href="http://www.ncbi.nlm.nih.gov/pubmed/23235272">d’améliorer l’attention</a>&nbsp;;</p></li>
<li><p>de <a href="http://www.ncbi.nlm.nih.gov/pubmed/25979089">renforcer légèrement de nombreuses « fonctions exécutives »</a> (aptitude à accomplir plusieurs tâches à la fois, capacité de la mémoire à court terme, planification, etc.)</p></li>
</ul>
<p>Si les trois points cités font en réalité l’objet d’une polémique (due à des <a href="http://www.ncbi.nlm.nih.gov/pubmed/26556389">études</a> <a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=tdcs+working+memory+colzato">récentes</a> <a href="http://www.ncbi.nlm.nih.gov/pubmed/25701175">montrant</a> une absence d’effet, voire une dégradation des performances sur certains protocoles), ce produit suscite de nombreux débats chez les chercheurs et les cliniciens.</p>
<p>En effet, ces derniers sont&nbsp;à la fois&nbsp;conscients du potentiel de la stimulation transcrânienne (dont l’un des modes d’action présumés serait de faciliter la plasticité cérébrale) et de ses risques, en particulier dans le cadre d’une commercialisation à grande échelle s’appuyant sur les techniques de marketing habituelles (entendre : trompeuses, partiales et sans scrupules).</p>
<p>L’influente revue&nbsp;Neuron a d’ailleurs publié [<a href="https://www.google.fr/url?sa=t'amp;rct=j'amp;q='amp;esrc=s'amp;source=web'amp;cd=2'amp;cad=rja'amp;uact=8'amp;ved=0ahUKEwiZoNLauvLKAhXFfhoKHXXpC0oQFggqMAE'amp;url=http%3A%2F%2Fpedroschestatsky.com.br%2F_files%2Fview.php%2Fdownload%2Ftdcsleitobrigatoria%2F27%2F5496bb010d33d.pdf'amp;usg=AFQjCNGpMz2IO8WDLPk4tL_ILBBpvr2eNw">PDF</a>] une mise en garde explicite il y a deux ans, sans grand effet depuis &nbsp;:</p>
<p><em>« L’intérêt du monde académique et du grand public au sujet de la tDCS a été alimenté par de grandes déclarations en matière de thérapie et d’amélioration [cognitive]. Alors que les actions de régulation se font attendre et que certaines questions éthiques doivent être envisagées, la couverture médiatique offerte à la tDCS est en croissance continue. » (Dubljovic et al., 2014&nbsp;; ma traduction)</em></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pubmed.png" class="img-fluid figure-img" width="507"></p>
<figcaption>Augmentation constante du nombre de publications par an relatives à l’amélioration cognitive et à la tDCS ces vingt dernières années - Medline Trend</figcaption>
</figure>
</div>
</section>
<section id="une-innocuité-pas-si-bien-établie" class="level2">
<h2 class="anchored" data-anchor-id="une-innocuité-pas-si-bien-établie">Une innocuité pas si bien établie</h2>
<p>Compte tenu de l’extrême rareté des incidents graves en laboratoire (quelques crises d’épilepsie néanmoins), l’innocuité de la tDCS est constamment mise en avant par ceux qui voudraient en tirer un profit financier.</p>
<p>Cependant, si ce constat vaut pour des protocoles occasionnels allant de une à vingt séances par patient, nous n’avons aucune idée des conséquences physiologiques d’une utilisation répétée sur plusieurs mois ou années, hors du contexte hospitalier.</p>
<p>En outre, les conséquences d’une utilisation intensive de la tDCS ont été principalement évaluées sur des souris ou des rats. Or, si peu d’effets indésirables sont constatés chez ces espèces, il faut néanmoins rappeler que notre cerveau est bien plus délicat que le leur.</p>
<p>A titre d’exemple, la neurotoxine <a href="https://fr.wikipedia.org/wiki/MPTP">MPTP</a> – qui cause la maladie de Parkinson – est déjà pathogène pour une dose de 0.001&nbsp;ou 0.1mg/kg chez l’humain (<a href="http://occupationalhealthprogram.ucsf.edu/MPTP_final.doc">DOC</a>), tandis que des doses 10&nbsp;à 100&nbsp;fois supérieures peinent à reproduire les mêmes symptômes chez le <a href="http://www.ncbi.nlm.nih.gov/pubmed/20522009">rongeur</a>.</p>
</section>
<section id="notre-rapport-aux-autres" class="level2">
<h2 class="anchored" data-anchor-id="notre-rapport-aux-autres">Notre rapport aux autres</h2>
<p>Prudence donc. Et méfiance aussi. Car s’il semble établi que la stimulation transcrânienne peut augmenter certaines capacités cognitives, il faut garder à l’esprit que ces « bénéfices » (qui pourraient au passage se révéler négligeables hors des conditions très spécifiques et contrôlées du laboratoire) s’accompagnent d’autres altérations cognitives qui ne seront pas forcément les bienvenues.</p>
<p>En 2013, une étude publiée dans Science a par exemple montré que la tDCS peut modifier la manière dont nous appréhendons certaines normes sociales (en l’occurrence, la tendance à donner spontanément à autrui diminue tandis que la tendance à donner pour éviter d’être puni augmente).</p>
<p>D’autres études parues depuis confirment que ce type de stimulation électrique peut altérer notre <a href="http://www.ncbi.nlm.nih.gov/pubmed/26808605">relation à autrui</a>, nos décisions en <a href="http://www.ncbi.nlm.nih.gov/pubmed/24073695">matière économique</a>, et un certain nombre d’autres mécanismes psychologiques.</p>
<p>Que ces modifications soient considérées comme positives et prometteuses pour la psychiatrie ou la neurologie ne doit pas faire oublier que nous parlons ici d’une modification de la pensée (voire de la personnalité) par un appareillage externe qui pourrait facilement être monté sur une paire de Google Glass…</p>
</section>
<section id="humanité-augmentée-altérée-dénaturée" class="level2">
<h2 class="anchored" data-anchor-id="humanité-augmentée-altérée-dénaturée">Humanité augmentée, altérée, dénaturée ?</h2>
<p>Chaque décennie vient avec son lot d’innovations technologiques, qui se démocratisent et s’offrent comme autant d’instruments de performance et de félicité.</p>
<p>En l’absence de cadre législatif contraignant, on peut donc craindre que les neurostimulateurs nous soient prochainement présentés comme les nouveaux « gadgets révolutionnaires », programmés à la manière des iPad pour faire fureur sur les marchés de Noël (et financiers).</p>
<pre><code></code></pre>
<p><em>Bernard Stiegler, sur le transhumanisme et l’amélioration cognitive</em></p>
<p>A l’instar d’autres produits high-tech qui peinent encore à trouver un marché, les mentalités anglo-saxonnes sont actuellement travaillées par les idéologues «&nbsp;transhumanistes&nbsp;» qui appellent de leurs vœux une réforme de la nature humaine par la technologie.</p>
<p>En guerre contre le techno-scepticisme qui accompagne la numérisation et l’automatisation intensive de nos sociétés, de nos vies, pour ne pas dire de nos pensées, leur rhétorique pourrait gagner la France plus vite qu’on ne le pense. En effet, devenu essentiel à une croissance économique pérenne du côté de la Silicon Valley, le mythe de l’homme augmenté ne manquera sans doute pas d’appuis dans les années qui viennent…</p>
<p><strong>Post-scriptum</strong></p>
<p>Le système tDCS n’est pas l’unique neurostimulateur dont la démocratisation pose question. Cet article aurait ainsi pu porter sur un système de stimulation transcutanée du nerf vague, présenté par la start-up Nervana au CES de Las Vegas (la grand messe high-tech où royal Macron s’est montré le mois passé). Cependant, j’ai laissé l’idée de côté car la société Nervana n’a jamais répondu à mes e-mails dans lesquels je demandais sur la base de quelles recherches reposait l’efficacité attendue de leur produit. Je n’ai trouvé aucune trace de telle recherches.</p>
<p>En revanche, cette technique de stimulation jusqu’alors réservée aux épileptiques ne vient pas sans effets secondaires (voix rauque, maux de tête, difficultés à déglutir) et aucune donnée ne suggère que sa synchronisation avec le rythme musical change quoi que ce soit à la chimie du cerveau ou à la perception auditive. Or, Trax a consacré ce vendredi un <a href="http://fr.traxmag.com/article/31644-nervana-les-ecouteurs-qui-procurent-des-sensations-d-extase">article-publicité</a> à «&nbsp;ces écouteurs qui procurent des sensations d’extase&nbsp;». Prenez donc la nouvelle avec de (très) longues pincettes.</p>
<p>(<a href="https://www.nouvelobs.com/rue89/rue89-neuro89/20160214.RUE2202/doper-le-cerveau-a-l-electricite-vers-une-humanite-augmentee-ou-alteree.html"><strong>Lien vers l’article original</strong></a>)</p>
<script src="https://giscus.app/client.js" data-repo="romainligneul/giscus-comments" data-repo-id="R_kgDOMSMTIw" data-category="CommentsBlogFR" data-category-id="DIC_kwDOMSMTI84CglZk" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>