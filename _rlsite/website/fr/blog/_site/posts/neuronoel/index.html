<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="RL, Neuro89">
<meta name="dcterms.date" content="2015-12-15">
<meta name="description" content="La générosité qui caractérise notamment la période des fêtes de Noël constitue un véritable défi pour les sciences du vivant. D’où nous vient cette motivation qui semble s’opposer aux principes de Darwin et à la logique de nos gènes, souvent taxés d’égoïsme ? Éclairage sur l’un des aspects les plus heureux de la nature humaine.">

<title>Les neurosciences du Père Noël, ou ce qui nous pousse à la générosité – blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(neuronoel.webp);
background-size: cover;
      }
</style>
<style>
.quarto-title-block .quarto-title-banner {
  background-position-y: center;
  height: 400px;
}
</style>


<link rel="stylesheet" href="../../../custom.scss">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Les neurosciences du Père Noël, ou ce qui nous pousse à la générosité</h1>
                  <div>
        <div class="description">
          La générosité qui caractérise notamment la période des fêtes de Noël constitue un véritable défi pour les sciences du vivant. D’où nous vient cette motivation qui semble s’opposer aux principes de Darwin et à la logique de nos gènes, souvent taxés d’égoïsme ? Éclairage sur l’un des aspects les plus heureux de la nature humaine.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">neuro89</div>
                <div class="quarto-category">neuroscience</div>
                <div class="quarto-category">génétique</div>
                <div class="quarto-category">sciences cognitives</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>RL, Neuro89 </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 15, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Dès que leurs ressources sont suffisantes et même parfois lorsqu’elles ne le sont pas, la plupart des êtres humains dépensent de l’énergie, du temps et de l’argent pour faire des cadeaux à leur famille, à leurs amis, à leurs collègues, voire à de parfaits inconnus – par l’intermédiaire d’associations <a href="https://web.archive.org/web/20160221231507/http:/www.lescadeauxsolidaires.fr/">solidaires</a> et <a href="https://web.archive.org/web/20160221231507/http:/www.chainedelespoir.org/fr">fraternelles</a>.</p>
<p>Si cette inclination existe déjà dans les sociétés humaines les plus primitives, comme l’a montré le sociologue et anthropologue Marcel Mauss dans son <a href="https://web.archive.org/web/20160221231507/https:/lectures.revues.org/520">«&nbsp;Essai sur le don&nbsp;»</a> (1925), les raisons qui poussent l’être humain à offrir sont longtemps restées problématiques pour la biologie. En effet, puisque toutes les ressources peuvent aider dans la célèbre « lutte pour la survie et la reproduction » darwinienne, <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Altruisme">l’altruisme</a> humain – dont les cadeaux de Noël constituent un genre particulier – a posé et continue de poser de sérieuses questions scientifiques… et pratiques aussi, puisque mieux comprendre la psychologie du Père Noël est également utile pour qui veut optimiser sa récolte de cadeaux!</p>
<p><strong>La « générosité utile » des animaux</strong></p>
<p>Encore très prisées aujourd’hui, les premières solutions au problème de l’altruisme reposent sur l’étude des sociétés animales. Chez de nombreuses espèces, on constate par exemple que les offrandes constituent un moyen de séduction crucial pour accéder à la reproduction. <a href="https://web.archive.org/web/20160221231507/http:/ssaft.com/Blog/dotclear/index.php?post/2009/10/04/S%C3%A9lection-sexuelle-par-le-Cannibalisme-chez-l-araign%C3%A9e">Certains insectes</a> mâles se laissent même dévorer par la femelle en guise de « cadeau », ce qui permet à cette dernière de faire des réserves énergétiques utiles à leur descendance commune !</p>
<p>D’ailleurs, l’idée que l’altruisme puisse être biologiquement utile à partir du moment où il facilite la vie (ou la survie) d’individus génétiquement apparentés est au cœur de la théorie dite de <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/S%C3%A9lection_de_parent%C3%A8le">«&nbsp;sélection de parentèle&nbsp;»</a>, proposée par Hamilton en 1964. Cette dernière résout bien le problème de l’altruisme dirigé vers les membres de notre famille ou nos enfants puisqu’elle montre que, dans certains cas, sacrifier nos ressources ou même nos vies peut avoir un impact positif sur la dissémination de nos gènes. Ici, l’exemple type est la situation où un individu donne sa vie pour sauver celles de trois frères et sœurs : comme il partage 50% de ses gènes avec chacun, son acte héroïque permet à plus de 100% de ses gènes de rester « en vie » !</p>
<p>Cependant, si les causes de l’altruisme dans le règne animal s’appliquent aussi aux êtres humains, notamment dans les rapports hommes-femmes ou parents-enfants, elles sont loin d’expliquer toutes les formes de la générosité humaine. En particulier, les cadeaux envers des individus non apparentés (génétiquement), voire anonymes, continuent de poser un problème auquel l’économie expérimentale et les neurosciences cognitives tentent de répondre ensemble.</p>
<section id="théorie-des-jeux-et-générosité-désintéressée-chez-lhomme" class="level2">
<h2 class="anchored" data-anchor-id="théorie-des-jeux-et-générosité-désintéressée-chez-lhomme">Théorie des jeux et générosité désintéressée chez l’homme</h2>
<p><a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/%C3%89conomie_comportementale">L’économie comportementale</a> cherche à décrire et à expliquer les décisions humaines touchant à l’acquisition et au partage de ressources utiles aux individus. Parmi ses <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Paradigme">paradigmes</a> expérimentaux, on trouve de nombreux « jeux » dans lesquels deux joueurs ou plus doivent prendre des décisions économiques simples. Ces décisions peuvent ensuite être envisagées sous un angle normatif ou rationnel : c’est ce que l’on appelle la <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Th%C3%A9orie_des_jeux">théorie des jeux</a>.</p>
<p>Le plus simple d’entre eux s’appelle le <a href="https://web.archive.org/web/20160221231507/http:/ecopsycho.gretha.cnrs.fr/spip.php?article114">«&nbsp;jeu du dictateur&nbsp;»</a> que l’on pourrait également appeler le « jeu du Père Noël », puisqu’il permet justement d’étudier les formes les plus désintéressées de la générosité chez l’être humain. Son principe est à la portée de tous : une somme d’argent (par exemple 10&nbsp;euros) est allouée par l’expérimentateur à l’un des deux joueurs, le dictateur (ou Père Noël !). Ce dernier doit alors décider quelle partie de la somme il souhaite donner à l’autre joueur.</p>
<p>En moyenne, les participants redistribuent entre 20&nbsp;et 30% [<a href="https://web.archive.org/web/20160221231507/http:/afse2015.sciencesconf.org/57665/document">PDF</a>] de la somme qui leur a été allouée (c’est-à-dire, en l’occurrence, entre 2&nbsp;et 3&nbsp;euros). Il semblerait donc que les décisions humaines ne soient pas aussi égoïstes et utilitaristes que certains <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Homo_homini_lupus_est">pessimistes</a> le pensent ! En effet, comme on joue le plus souvent de manière anonyme et qu’aucun bénéfice ultérieur n’est à espérer (amitié, réputation, etc.), toute donation non nulle peut être interprétée comme un acte réellement généreux.</p>
</section>
<section id="regard-des-autres-regard-de-lautre" class="level2">
<h2 class="anchored" data-anchor-id="regard-des-autres-regard-de-lautre">Regard des autres, regard de l’Autre</h2>
<p>Parmi le grand nombre de travaux ayant étudié l’ampleur et la fréquence de ces actes généreux en fonction des populations étudiées et des contextes expérimentaux utilisés par les chercheurs, certains ont donné des résultats tout à fait étonnants. Par exemple, le fait de mettre des yeux ou même un simple pictogramme rappelant vaguement la forme d’un visage humain dans le champ visuel des joueurs permet d’augmenter la fréquence des donations non nulles de 25&nbsp;à 40% [<a href="https://web.archive.org/web/20160221231507/http:/ecopsycho.gretha.cnrs.fr/IMG/pdf/neg_014_0071_1_.pdf">PDF</a>].</p>
<p>Plus généralement, la présence d’yeux dans notre champ visuel a tendance à faciliter de nombreux comportements prosociaux et à limiter les comportements anti-sociaux, et cet effet commence d’ailleurs à être testé dans les lieux publics pour réduire <a href="https://web.archive.org/web/20160221231507/http:/www.medicaldaily.com/nudge-psychology-posting-actual-watching-eyes-paper-can-reduce-littering-363496">l’abandon sauvage des déchets</a> ou pour diminuer la <a href="https://web.archive.org/web/20160221231507/http:/rsbl.royalsocietypublishing.org/content/2/3/412">propension à frauder</a>. Ces découvertes suggèrent-elles une stratégie du moindre effort pour maximiser votre nombre de cadeaux&nbsp;? Dans le doute, en période de fêtes, vous pouvez toujours coller des yeux (de préférence, les vôtres) sur le portefeuille de vos parents ou de votre conjoint !</p>
<p>Pour favoriser la générosité d’autrui, une autre source d’inspiration provient des protocoles d’<a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Amor%C3%A7age_(psychologie)">amorçage</a> («&nbsp;priming&nbsp;» en anglais). Ceux-ci consistent par exemple, juste avant d’effectuer une tâche, à réorganiser en phrases cohérentes des « mots-cibles », présentés dans le désordre. Une équipe de chercheurs a ainsi montré que la quantité d’argent transférée spontanément dans le jeu du dictateur [<a href="https://web.archive.org/web/20160221231507/http:/static1.squarespace.com/static/52d7f47fe4b0c692d7426966/t/531e36e6e4b0ddc80cd16dec/1394489062456/god-is-watching-you.pdf">PDF</a>] est plus importante si les phrases réorganisées avant l’expérience contenaient des mots liés à l’idée de Dieu (comme « esprit », « sacré », « divin », etc.) ou à des concepts juridiques (comme « civique », « tribunal », « jury », etc.).</p>
<p>Cependant, ces résultats <a href="https://web.archive.org/web/20160221231507/http:/www.ncbi.nlm.nih.gov.gate1.inist.fr/pubmed/26168038">difficilement réplicables</a> contrastent avec une étude très récente suggérant que <a href="https://web.archive.org/web/20160221231507/http:/www.lemonde.fr/sciences/article/2015/11/05/les-enfants-d-athees-sont-plus-altruistes-que-ceux-eleves-dans-une-famille-religieuse_4804217_1650684.html">les enfants issus de familles athées sont plus généreux</a> que ceux issus de familles religieuses dans le jeu du dictateur&nbsp;: les notions religieuses exercent donc un effet complexe sur la générosité… Mais cela ne coûte pas grand chose d’ajouter les mots « divin » ou « justice » sous la paire d’yeux déjà collée sur le portefeuille de vos Pères Noël potentiels.</p>
<p><strong>Plaisir d’offrir</strong></p>
<p>Les mécanismes cérébraux qui sous-tendent l’altruisme dans le jeu du dictateur sont encore très mal connus, probablement parce que de nombreux processus psychologiques se combinent pour aboutir à un tel comportement (estime de soi, raisonnement moral, empathie, orientations politique et culturelle, etc.).</p>
<p>Malgré tout, certaines observations (restant à confirmer) suggèrent que la dopamine pourrait jouer ici un rôle important, puisque l’administration d’une substance qui augmente les taux de dopamine dans le cortex préfrontal permet également d’augmenter la quantité moyenne d’argent transféré dans le jeu du dictateur. Mais il est hors de question de tenter une option aussi risquée avec vos proches : à la rigueur, si vous souffrez vraiment d’un déficit de générosité, optez pour un menu de Noël riche en <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Tyrosine">tyrosine</a>, le précurseur naturel de la dopamine !</p>
<p>En revanche, depuis une petite dizaine d’années, une série de recherches a permis de mieux comprendre pourquoi notre cerveau attribue une valeur positive au plaisir ressenti par autrui, ce qui ouvre donc une piste prometteuse pour comprendre notre motivation à offrir, indépendamment de tout bénéfice ultérieur.</p>
<p>L’histoire remonte aux années 50, lorsque des chercheurs se sont rendu compte que des rats de laboratoire « adoraient » stimuler certaines régions spécifiques de leur cerveau, regroupées plus tard sous le terme <a href="https://web.archive.org/web/20160221231507/http:/acces.ens-lyon.fr/acces/ressources/neurosciences/circuit-de-la-recompense/enseigner/contenus-et-figures-activites-pedagogiques/images-relatives-a-lactivite-pedagogique/experience-de-olds-milner-1954">«&nbsp;circuit de la récompense&nbsp;»</a>. Irriguées notamment par la dopamine, on a ensuite découvert – grâce à l’imagerie par résonance magnétique fonctionnelle (<a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Imagerie_par_r%C3%A9sonance_magn%C3%A9tique_fonctionnelle">IRMf</a>) – que ces régions s’activent à chaque fois qu’un être humain ressent une émotion positive ou reçoit une récompense. Nul doute que ces zones sont actives chez vos enfants ou votre conjoint lorsqu’ils voient leurs cadeaux près du sapin et plus encore lorsqu’ils ouvrent ces mêmes cadeaux (sauf en cas de déception majeure !). Situés notamment dans le striatum ventral ou le cortex préfrontal ventromédian, ces signaux sont d’ailleurs à l’origine d’une discipline scientifique en pleine expansion : la <a href="https://web.archive.org/web/20160221231507/https:/fr.wikipedia.org/wiki/Neuro%C3%A9conomie">neuroéconomie</a>.</p>
<p>Mais ce n’est qu’à la fin des années 2000&nbsp;que plusieurs équipes de recherche ont mis en évidence un phénomène inattendu : ces aires cérébrales s’activent non seulement lorsque l’on éprouve soi-même du plaisir, mais également lorsque l’on observe autrui dans la même situation. De sorte que, lorsque vous regardez vos proches et votre famille ouvrir leurs cadeaux et éprouver du plaisir, votre propre circuit de la récompense s’active aussi ! S’il peut donc favoriser la générosité, on pense que la raison d’être principale de ce phénomène biologique est de rendre possible l’apprentissage par observation (ou <a href="https://web.archive.org/web/20160221231507/http:/www.persee.fr/doc/psy_0003-5033_1970_num_70_2_27912">apprentissage vicariant</a>). Le principe est simple : en observant autrui accomplir des actions couronnées de succès et en ressentant des émotions similaires aux siennes, on apprend en même temps que lui à effectuer les bonnes actions dans les bons contextes (ou à éviter les mauvaises).</p>
<p>Bien que les activités cérébrales détectées par IRMf soient généralement moins importantes [<a href="https://web.archive.org/web/20160221231507/http:/www.healthemotions.org/downloads/zaki_6.pdf">PDF</a>] lorsque nous observons les autres recevoir des récompenses par rapport aux situations où nous en recevons nous-mêmes, ces signaux dits « vicariants » peuvent être augmentés lorsqu’autrui est perçu de façon positive [<a href="https://web.archive.org/web/20160221231507/http:/ryu.webstarts.com/uploads/Science_Similarity_in_vicarious_reward_09.pdf">PDF</a>], ce qui est somme toute logique : si vous voulez que le Père Noël éprouve encore plus de plaisir en vous regardant ouvrir vos cadeaux, soyez donc sages et aimables !</p>
<p>En utilisant le principe de l’amorçage (déjà évoqué plus haut), une étude de 2014&nbsp;[<a href="https://web.archive.org/web/20160221231507/http:/www.psy.pku.edu.cn/~hanshihui/2014/2014%20Varnum%20et%20al%20NeuroImage%20reprint.pdf">PDF</a>] a même montré que le simple fait d’exposer les participants à des récits de voyages à la première personne du pluriel (« nous ») pouvait rendre ces signaux vicariants aussi intenses que ceux observés lorsque les récompenses sont reçues directement par le participant, tandis que les récits à la première personne du singulier (« je ») étaient associés à des activations plus faibles…</p>
<p>Si l’année 2015&nbsp;fut marquée par de nombreux événements pouvant faire douter de la nature humaine, l’inclination quasi universelle à offrir et à partager que représente Noël doit donc nous rappeler que l’espoir est de mise, et que l’homme dispose sans doute des ressources mentales et affectives pour construire un monde meilleur !</p>
<p>Bonnes fêtes et joyeux Noël, donc !</p>
<p><a href="https://www.nouvelobs.com/rue89/rue89-sciences/20151225.RUE1735/les-neurosciences-du-pere-noel-ou-ce-qui-nous-pousse-a-la-generosite.html"><strong>Lien vers l’article original</strong></a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>