---
title: "Quiz √©lectoraux 2022"
execute:
  eval: false
  freeze: true  
---

## √âtude initiale: quiz du Figaro

C'est initialement le quiz du Figaro qui m'a inspir√© cette √©tude. Mais il √©tait tellement biais√© qu'une approche quantitative n'aurait pas valu la peine.

Je me suis content√© d'en faire un Tweet qui constitue une bon introduction au probl√®me pos√©.

<blockquote class="twitter-tweet"><p lang="fr" dir="ltr">Le niveau de biais dans le questionnaire de <a href="https://twitter.com/Le_Figaro?ref_src=twsrc%5Etfw">@Le_Figaro</a> &quot;De quel candidat √™tes-vous le plus proche?&quot; est carr√©ment risible. <br>M√©thode: 0/20. Honn√™tet√©: ?/20. <br>A suivre, une analyse du questionnaire propos√© par <a href="https://twitter.com/lemondefr?ref_src=twsrc%5Etfw">@lemondefr</a> qui est foireux lui aussi quoique de fa√ßon plus subtile. <a href="https://t.co/BZTUizQENo">pic.twitter.com/BZTUizQENo</a></p>&mdash; Romain Ligneul üõ∏ (@nerfsocial) <a href="https://twitter.com/nerfsocial/status/1509783872174706698?ref_src=twsrc%5Etfw">April 1, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

## √âtude qualitative des items: quiz du Monde

Avant de commencer √† coder mais en sachant d√©j√† quelles r√©ponses √©taient associ√©es √† quels candidats, j'ai analys√© attentivement les diff√©rents items et j'ai rapport√© un certain nombre d'anomalie dans cet autre thread Twitter.

<blockquote class="twitter-tweet"><p lang="fr" dir="ltr">En principe, les quiz √©lectoraux pourraient √™tre utiles √† la d√©mocratie. Mais en pratique, ils induisent en erreur en donnant un faux sentiment d&#39;objectivit√©.<br>Dans ce thread j&#39;analyse en d√©tail l&#39;outil propos√© par <a href="https://twitter.com/lemondefr?ref_src=twsrc%5Etfw">@lemondefr</a>.<br>Pour le code et les donn√©es üîΩ<a href="https://t.co/5AbpOn2jpL">https://t.co/5AbpOn2jpL</a></p>&mdash; Romain Ligneul üõ∏ (@nerfsocial) <a href="https://twitter.com/nerfsocial/status/1509852362420236288?ref_src=twsrc%5Etfw">April 1, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

## Code

Tous les scripts et toutes les donn√©es n√©cessaires pour reproduire cette analyse sont sur disponibles sur [Github](https://github.com/romainligneul/quizlemonde).

A noter: dans le dossier "sources" du dossier Github se trouvent √©galement les quiz du Figaro, du T√©l√©gramme et du Parisien au format brut, extraits le 2/04, pour ceux que √ßa int√©resserait de g√©n√©raliser l'approche ci-dessous. Vous pouvez aussi t√©l√©charger le quiz du Monde dans un format Excel [ici](https://github.com/romainligneul/quizlemonde/raw/main/sources/quizlemonde.xlsx).

Malheureusement, j'ai analys√© ces donn√©es avec Matlab (non open-source). Promis, tous les prochains projets utiliseront Python üòá.

Le script lemonde_analyse.m extrait les informations du quiz et simule un grand nombre de r√©ponses al√©atoires pour √©valuer l'√©quilibre du test. Un test non-biais√© devrait aboutir √† une r√©partition homog√®ne des probabilit√©s d'√™tre class√© premier d'un candidat √† l'autre. Cette analyse peut se faire sur la base des 20 premi√®res questions ou du quiz entier, en corrigeant ou non pour le nombre d'affectations possibles par candidats. Le script lemonde_plot.m cr√©e les figures. Les barres d'erreur indiquent les intervalles de confiance √† 95%.

Le but de ces analyses est de montrer qu'aucune version du quiz n'est √©quilibr√©e. Il y a deux facteurs en jeu. Premi√®rement, tous les candidats n'ont pas le m√™me nombre d'affectations possibles, ce qui diminue m√©caniquement le nombre de points qu'ils peuvent se voir attribuer. Deuxi√®mement, m√™me lorsque l'on corrige pour le nombre d'affectations possibles par candidat (de mani√®re √† ce que chaque candidat re√ßoive en moyenne exactement le m√™me nombre de points), le jeu complexe des co-affectations fait que certains candidats sont avantag√©s par rapport √† d'autres.

### Pr√©traitement des donn√©es

Version du quiz utilis√©e: <https://www.lemonde.fr/les-decodeurs/article/2022/03/31/quiz-sur-la-presidentielle-2022-de-quel-candidat-etes-vous-le-plus-proche_6119971_4355770.html>

#### Affectations par candidat

```matlab
clear all

% Le quiz a √©t√© import√© a partir de cette addresse sous la forme d'un
% fichier JSON
% https://assets-decodeurs.lemonde.fr/sheets/XusEdnYa3E1Jjl5VdrKGA2z9bH1uwA_887
% Ce fichier JSON a ensuite √©t√© converti au format excel/csv en utilisant
% cet outil: https://data.page/json/csv
% Puis il a √©t√© import√© (√† partir du fichier excel) dans matlab pour
% produire ce fichier:
quiz=importdata('sources/quizlemonde.mat')

% sp√©cifications de l'analyse
nom_analyse='analyses';

nquestions=20;
nsimulations=10000;
correction_nquestion=true;
candidats={'Arthaud', 'Poutou','Roussel', 'M√©lenchon', 'Jadot', 'Hidalgo', 'Macron', 'P√©cresse', 'Lassalle', 'Dupont-Aignan', 'Le Pen', 'Zemmour'};

% pr√©traitement du quiz pour obtenir les affectations par candidat et par
% question.
noptions=nan(nquestions,1);
for i=1:nquestions
    for a=1:6
        if (iscell(quiz{i+1,9+a})==0 | isempty(cell2mat(quiz{i+1,9+a}))) & isnan(noptions(i,1))
            noptions(i,1)=a-1;
        end
        for c=1:length(candidats)
            exist_str=strfind(quiz{i+1,9+a},candidats{c});
            try
                if isempty(exist_str{1})==0
                    mat_affect(c,i)=a;
                end
            end
        end
    end
end

```

#### Calculs compl√©mentaires

```matlab
% calcule la similarit√© entre candidats (r√©ception de points pour les m√™mes r√©ponses)
for c=1:length(candidats)
    for cc=1:length(candidats)
        coaffectation(c,cc)=(sum(mat_affect(c,mat_affect(c,:)>0)==mat_affect(cc,mat_affect(c,:)>0)))/sum(mat_affect(c,:)>0);
    end
end

% correction pour le nombre de questions concernant chaque candidat
if correction_nquestion
    point_correction=1./(mean(mat_affect>0,2));
else
    point_correction=ones(length(candidats),1);
end

% simulation des r√©ponses al√©atoires
scores=zeros(length(candidats),nsimulations);
for s=1:nsimulations
    for i=1:nquestions
         choix=randi(noptions(i));
         points=find(choix==mat_affect(:,i));
         scores(points,s)=scores(points,s)+point_correction(points);
    end
    [dum, dum, invrank] = unique(scores(:,s));
    rang(:,s)=1+max(invrank)-invrank;
end

% calcule des moyennes et des intervalles de confiance √† 95%
for c=1:length(candidats)
    proportion_premier(c,1)=mean(rang(c,:)==1);
    confidence_interval(c,:)=bootci(1000,@(x) mean(x), [rang(c,:)==1]');
end

% cr√©e le dossier si besoin
if exist('analyses', 'dir')==0
    mkdir('analyses')
end

% sauvegarde les donn√©es
save(['analyses/' nom_analyse '.mat'])

% fichiers pr√©sauvegard√©s
% court = 20 questions: premi√®re partie du quiz
% long = 40 questions: inclusion des questions suppl√©mentaires
```

### Figures

#### Initialization

```matlab

% nom de l'analyse
analyse_source='analyses_court_correction';

% charge l'analyse souhait√©e
load(['analyses/' analyse_source '.mat'])

% cr√©e le dossier si besoin
if exist('figures', 'dir')==0
    mkdir('figures')
end

```

```matlab
% plot biais
f1=figure('name', 'bias', 'color', 'w', 'position',  [246   328   560   645] )
% code couleur r√©cup√©r√© sur le site du monde
hexcolors={'#9D0D16', '#CE2929', '#F1001C', '#FF3333', '#23B73D', '#FF668B', '#FF9F0E', '#0890C5', '#617B75', '#02279C', '#8D6026','#654519'};
hm=bar([1:12]',diag(100*proportion_premier(:,1)),'stacked');
hold on
he=errorbar(1:12,100*proportion_premier,100*(proportion_premier-confidence_interval(:,1)),100*(confidence_interval(:,2)-proportion_premier));
he.LineStyle='none';
he.Color='k';
he.LineWidth=1;
hold off
for c=1:12
    cartecouleur(c,:)=sscanf(hexcolors{c}(2:end),'%2x%2x%2x',[1 3])/255;
    hm(c).FaceColor=cartecouleur(c,:);
    hm(c).FaceAlpha=0.8;
end
xlim([0 13])
ylabel('premier ou copremier (%)')
set(gca, 'xticklabel', candidats, 'fontsize', 14)
box off
camroll(-90)
saveas(f1, ['figures/figure_' analyse_source '_biais.png'])

```

| Biais non-corrig√© | Biais corrig√© |
|------------------------------------|------------------------------------|
| ![La simulation de nombreux participants dont les choix sont al√©atoires permet de r√©v√©ler de tr√®s forts biais dans la construction du quiz, certains candidats √©tant par d√©fault avantag√©s par rapport √† d'autres, avec ou sans correction pour le nombre de r√©ponses les concernant.](biais_noncorrige.png) | ![](biais_noncorrige.png) |

#### Coaffectation et similarit√©

```matlab
% similarit√©
f2=figure('color', 'w')
imagesc(100\*coaffectation) 
set(gca,'xtick',1:12); 
set(gca,'ytick',1:12); 
set(gca,'xticklabel',candidats); 
set(gca,'yticklabel',candidats, 'fontsize', 14); 
xticklabel_rotate(\[\],45,\[\], 'fontsize', 14) 
title('pourcentage de co-affectations') 
colorbar 
set(gcf, 'position', \[ 808 328 984 645\]) 
saveas(f2, \['figures/figure\_' analyse_source(10:end) '\_similarit√©.png'\])

```

![Coaffectations](coaffectations.png){fig-align="center"}


<script src="https://giscus.app/client.js"
        data-repo="romainligneul/giscus-comments"
        data-repo-id="R_kgDOMSMTIw"
        data-category="Comments OtherFR"
        data-category-id="DIC_kwDOMSMTI84Cgltq"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>